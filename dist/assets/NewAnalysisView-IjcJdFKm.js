import{x as z,h as m,d as j,a as f,c as p,b as e,z as U,l as M,k as o,n as B,g as F,i as $,t as g,e as b,T as S,w as _,_ as N,o as R,A as V,y as T,B as I,C as O,D as X,u as H}from"./index-Dgz2JEFO.js";import{B as K}from"./BaseInput-BIifltlw.js";import{_ as W}from"./BaseButton.vue_vue_type_script_setup_true_lang-CRAMmwsf.js";import{u as q}from"./useGsap-mLCREdgo.js";import{u as G}from"./analysis-BZbIM5Kh.js";import{u as J}from"./useToast-C5s0dywv.js";const Y=["application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],Z=[".pdf",".docx"],L=10;function Q(){const n=m(null),r=m(!1),l=m(null),i=z(()=>n.value?.name??null),d=z(()=>n.value?(n.value.size/1024/1024).toFixed(2):null);function a(s){return!Y.includes(s.type)&&!Z.some(t=>s.name.endsWith(t))?"Only PDF and DOCX files are supported.":s.size>L*1024*1024?`File size must be under ${L} MB.`:null}function c(s){const t=a(s);return t?(l.value=t,n.value=null,!1):(l.value=null,n.value=s,!0)}function v(s){s.preventDefault(),r.value=!0}function w(){r.value=!1}function h(s){s.preventDefault(),r.value=!1;const t=s.dataTransfer?.files[0];t&&c(t)}function y(s){const t=s.target,x=t.files?.[0];x&&c(x),t.value=""}function k(){n.value=null,l.value=null}return{selectedFile:n,isDragging:r,uploadError:l,fileDisplayName:i,fileSizeMb:d,onDragOver:v,onDragLeave:w,onDrop:h,onFileInput:y,clearFile:k}}const ee={class:"space-y-3"},te=["onKeydown"],se={key:1},le={key:2,class:"flex items-center gap-4 w-full max-w-sm"},oe={class:"flex-1 min-w-0 text-left"},ne={class:"text-sm font-medium text-white truncate"},ae={class:"text-xs text-white/40"},re={key:0,class:"text-sm text-red-400 flex items-center gap-1.5"},ie=j({__name:"FileDropzone",emits:["file-selected"],setup(n,{emit:r}){const l=r,{selectedFile:i,isDragging:d,uploadError:a,fileDisplayName:c,fileSizeMb:v,onDragOver:w,onDragLeave:h,onDrop:y,onFileInput:k,clearFile:s}=Q(),t=m(null);function x(D){y(D),i.value&&l("file-selected",i.value)}function E(D){k(D),i.value&&l("file-selected",i.value)}function A(){t.value?.click()}function P(){s()}return(D,u)=>(f(),p("div",ee,[e("div",{role:"button",tabindex:"0",class:B(["relative flex flex-col items-center justify-center gap-4 rounded-2xl border-2 border-dashed p-10 text-center cursor-pointer transition-all duration-300",o(d)?"border-brand-500 bg-brand-500/10 scale-[1.01]":"border-white/15 hover:border-brand-500/60 hover:bg-white/[0.02]",o(a)?"border-red-500/40":""]),onDragover:u[0]||(u[0]=(...C)=>o(w)&&o(w)(...C)),onDragleave:u[1]||(u[1]=(...C)=>o(h)&&o(h)(...C)),onDrop:x,onClick:A,onKeydown:U(M(A,["prevent"]),["enter","space"])},[o(i)?F("",!0):(f(),p("div",{key:0,class:B(["flex h-16 w-16 items-center justify-center rounded-full transition-all duration-300",o(d)?"bg-brand-500/20":"bg-surface-600"])},[...u[2]||(u[2]=[e("svg",{class:"w-8 h-8 text-brand-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})],-1)])],2)),o(i)?(f(),p("div",le,[u[5]||(u[5]=e("div",{class:"flex h-12 w-12 shrink-0 items-center justify-center rounded-xl bg-brand-500/20"},[e("svg",{class:"w-6 h-6 text-brand-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),e("div",oe,[e("p",ne,g(o(c)),1),e("p",ae,g(o(v))+" MB",1)]),e("button",{type:"button",class:"flex h-8 w-8 items-center justify-center rounded-lg text-white/40 hover:text-red-400 hover:bg-red-400/10 transition-colors",onClick:M(P,["stop"])},[...u[4]||(u[4]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])):(f(),p("div",se,[...u[3]||(u[3]=[e("p",{class:"text-base font-medium text-white/80"},[e("span",{class:"text-brand-400"},"Click to upload"),$(" or drag & drop ")],-1),e("p",{class:"mt-1 text-sm text-white/40"},"PDF or DOCX — max 10 MB",-1)])])),e("input",{ref_key:"inputRef",ref:t,type:"file",accept:".pdf,.docx,application/pdf,application/vnd.openxmlformats-officedocument.wordprocessingml.document",class:"hidden",onChange:E},null,544)],42,te),b(S,{name:"error-fade"},{default:_(()=>[o(a)?(f(),p("p",re,[u[6]||(u[6]=e("svg",{class:"w-4 h-4 shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)),$(" "+g(o(a)),1)])):F("",!0)]),_:1})]))}}),ue=N(ie,[["__scopeId","data-v-58b834c8"]]),de={class:"w-full space-y-1"},ce={key:0,class:"flex justify-between text-xs text-white/50"},fe=j({__name:"ProgressBar",props:{value:{},height:{default:"h-2"},showLabel:{type:Boolean,default:!1},animated:{type:Boolean,default:!0}},setup(n){const r=n,l=m(null),{animateProgress:i}=q(),d=z(()=>r.value>=80?"bg-gradient-to-r from-green-500 to-emerald-400":r.value>=50?"bg-gradient-to-r from-yellow-500 to-amber-400":"bg-gradient-to-r from-red-500 to-rose-400");return R(()=>{l.value&&r.animated&&(l.value.style.width="0%",i(l.value,r.value))}),V(()=>r.value,a=>{l.value&&r.animated?i(l.value,a):l.value&&(l.value.style.width=`${a}%`)}),(a,c)=>(f(),p("div",de,[n.showLabel?(f(),p("div",ce,[T(a.$slots,"label"),e("span",null,g(n.value)+"%",1)])):F("",!0),e("div",{class:B(["w-full bg-surface-600 rounded-full overflow-hidden",n.height])},[e("div",{ref_key:"barRef",ref:l,class:B(["h-full rounded-full transition-none",d.value]),style:I({width:n.animated?"0%":`${n.value}%`})},null,6)],2)]))}}),pe={class:"p-6 sm:p-8 max-w-2xl mx-auto space-y-8"},me={class:"glass-card rounded-2xl p-6 space-y-3"},ve={class:"glass-card rounded-2xl p-6 space-y-3"},xe={class:"glass-card rounded-2xl p-6 space-y-3"},he={class:"space-y-1.5"},ge={class:"text-xs text-white/30 text-right"},we={key:0,class:"glass-card rounded-2xl p-6 space-y-3"},be={class:"flex items-center justify-between text-sm"},ye={class:"text-white font-semibold"},Ce=j({__name:"NewAnalysisView",setup(n){const r=H(),l=G(),i=J(),d=m(null),a=m(""),c=m(""),v=m(""),w=z(()=>!!d.value&&!l.uploading);function h(s){if(!s)return v.value="",!0;try{return new URL(s),v.value="",!0}catch{return v.value="Enter a valid URL (e.g. https://yoursite.com)",!1}}V(a,h);function y(s){d.value=s}async function k(){if(d.value&&h(a.value))try{const s=await l.submitAnalysis(d.value,a.value,c.value);i.success("Analysis complete! Loading your results…"),await r.push({name:"analysis-results",params:{id:s.id}})}catch(s){i.error(s.message??"Submission failed. Please try again.")}}return(s,t)=>(f(),p("div",pe,[t[9]||(t[9]=e("div",null,[e("h1",{class:"text-2xl font-black text-white"},"New Analysis"),e("p",{class:"text-sm text-white/40 mt-1"},"Upload your resume and we'll analyze it with AI.")],-1)),e("form",{class:"space-y-6",onSubmit:M(k,["prevent"])},[e("div",me,[t[2]||(t[2]=e("div",{class:"flex items-center gap-3 mb-1"},[e("span",{class:"flex h-6 w-6 items-center justify-center rounded-full bg-brand-500 text-white text-xs font-bold"},"1"),e("h2",{class:"text-base font-semibold text-white"},"Upload Resume"),e("span",{class:"text-xs text-red-400"},"*required")],-1)),b(ue,{onFileSelected:y})]),e("div",ve,[t[4]||(t[4]=e("div",{class:"flex items-center gap-3 mb-1"},[e("span",{class:"flex h-6 w-6 items-center justify-center rounded-full bg-surface-500 text-white/60 text-xs font-bold"},"2"),e("h2",{class:"text-base font-semibold text-white"},"Portfolio URL"),e("span",{class:"text-xs text-white/30"},"optional")],-1)),b(K,{modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=x=>a.value=x),placeholder:"https://yourportfolio.com",type:"url",error:v.value,hint:"Include your portfolio or GitHub for a full critique"},{prefix:_(()=>[...t[3]||(t[3]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})],-1)])]),_:1},8,["modelValue","error"])]),e("div",xe,[t[5]||(t[5]=e("div",{class:"flex items-center gap-3 mb-1"},[e("span",{class:"flex h-6 w-6 items-center justify-center rounded-full bg-surface-500 text-white/60 text-xs font-bold"},"3"),e("h2",{class:"text-base font-semibold text-white"},"Target Job Description"),e("span",{class:"text-xs text-white/30"},"optional but recommended")],-1)),e("div",he,[O(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=x=>c.value=x),placeholder:"Paste the job description here to get tailored keyword and skills analysis…",rows:"5",maxlength:"3000",class:"input-base resize-none leading-relaxed"},null,512),[[X,c.value]]),e("p",ge,g(c.value.length)+"/3000",1)])]),b(S,{name:"fade"},{default:_(()=>[o(l).uploading?(f(),p("div",we,[e("div",be,[t[6]||(t[6]=e("span",{class:"text-white/60"},"Uploading and analyzing…",-1)),e("span",ye,g(o(l).uploadProgress)+"%",1)]),b(fe,{value:o(l).uploadProgress,height:"h-2"},null,8,["value"]),t[7]||(t[7]=e("p",{class:"text-xs text-white/30 text-center"},"This usually takes 10–15 seconds",-1))])):F("",!0)]),_:1}),b(W,{type:"submit",variant:"primary",size:"lg",loading:o(l).uploading,disabled:!w.value,full:""},{"icon-left":_(()=>[...t[8]||(t[8]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})],-1)])]),default:_(()=>[$(" "+g(o(l).uploading?"Analyzing…":"Analyze Resume"),1)]),_:1},8,["loading","disabled"])],32)]))}});export{Ce as default};
//# sourceMappingURL=NewAnalysisView-IjcJdFKm.js.map
