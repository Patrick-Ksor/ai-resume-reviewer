import{_ as m}from"./BaseSkeleton.vue_vue_type_script_setup_true_lang-ycObIMPY.js";import{B as S}from"./BaseInput-BIifltlw.js";import{_ as j,d as A}from"./FilterPill.vue_vue_type_script_setup_true_lang-BUs5RIlw.js";import{u as V}from"./analysis-BZbIM5Kh.js";import{d as M,o as D,A as f,c as l,b as e,e as n,w as y,F as p,f as x,k as d,t as a,g as F,h as v,r as N,a as o,s as $,n as g}from"./index-Dgz2JEFO.js";const z={class:"p-6 sm:p-8 max-w-5xl mx-auto space-y-6"},H={class:"flex flex-col sm:flex-row gap-3"},L={class:"flex-1"},U={class:"flex items-center gap-2 overflow-x-auto pb-1"},P={class:"glass-card rounded-2xl overflow-hidden"},T={key:0,class:"divide-y divide-white/[0.04]"},R={class:"flex-1 space-y-2"},E={key:1,class:"px-6 py-16 text-center"},I={class:"text-white/30 text-sm"},q={key:2,class:"divide-y divide-white/[0.04]"},G={class:"flex-1 min-w-0"},J={class:"text-sm font-medium text-white truncate group-hover:text-brand-300 transition-colors"},K={class:"text-xs text-white/40 mt-0.5"},O={key:0,class:"flex justify-center items-center gap-3"},Q=["disabled"],W={class:"text-sm text-white/50"},X=["disabled"],le=M({__name:"HistoryView",setup(Y){const i=V(),u=v(""),c=v("all"),r=v(1),k=["all","completed","processing","failed"];async function h(){await i.fetchHistory({page:r.value,limit:10,search:u.value||void 0,status:c.value==="all"?void 0:c.value})}D(h);const b=A(async()=>{r.value=1,await h()},400);f(u,b),f(c,async()=>{r.value=1,await h()});function _(w){return new Date(w).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}const C={completed:"text-green-400 bg-green-400/10",processing:"text-yellow-400 bg-yellow-400/10",pending:"text-white/40 bg-white/5",failed:"text-red-400 bg-red-400/10"};return(w,s)=>{const B=N("RouterLink");return o(),l("div",z,[s[8]||(s[8]=e("div",null,[e("h1",{class:"text-2xl font-black text-white"},"Analysis History"),e("p",{class:"text-sm text-white/40 mt-1"},"Browse and review all your past resume analyses.")],-1)),e("div",H,[e("div",L,[n(S,{modelValue:u.value,"onUpdate:modelValue":s[0]||(s[0]=t=>u.value=t),placeholder:"Search by filename…",type:"search"},{prefix:y(()=>[...s[3]||(s[3]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)])]),_:1},8,["modelValue"])]),e("div",U,[(o(),l(p,null,x(k,t=>n(j,{key:t,label:t==="all"?"All":t.charAt(0).toUpperCase()+t.slice(1),active:c.value===t,onClick:Z=>c.value=t},null,8,["label","active","onClick"])),64))])]),e("div",P,[d(i).loadingHistory?(o(),l("div",T,[(o(),l(p,null,x(5,t=>e("div",{key:t,class:"px-6 py-4 flex items-center gap-4"},[n(m,{width:"2.5rem",height:"2.5rem",rounded:"rounded-xl"}),e("div",R,[n(m,{width:"50%",height:"0.875rem"}),n(m,{width:"30%",height:"0.75rem"})]),n(m,{width:"4rem",height:"1.5rem",rounded:"rounded-full"}),n(m,{width:"2rem",height:"1rem",rounded:"rounded"})])),64))])):d(i).history.length?(o(),l("div",q,[(o(!0),l(p,null,x(d(i).history,t=>(o(),$(B,{key:t.id,to:{name:"analysis-results",params:{id:t.id}},class:"px-6 py-4 flex items-center gap-4 hover:bg-white/[0.02] transition-all duration-200 group"},{default:y(()=>[e("div",{class:g(["flex h-11 w-11 shrink-0 items-center justify-center rounded-xl text-sm font-bold transition-transform duration-200 group-hover:-translate-y-0.5",(t.atsScore?.overall??0)>=80?"bg-green-400/10 text-green-300":(t.atsScore?.overall??0)>=50?"bg-yellow-400/10 text-yellow-300":t.atsScore?"bg-red-400/10 text-red-300":"bg-surface-600 text-white/30"])},a(t.atsScore?.overall??"—"),3),e("div",G,[e("p",J,a(t.resumeFilename??"Untitled Analysis"),1),e("p",K,a(_(t.createdAt)),1)]),e("span",{class:g(["text-xs px-2.5 py-1 rounded-full font-medium capitalize",C[t.status]??""])},a(t.status),3),s[5]||(s[5]=e("svg",{class:"w-4 h-4 text-white/20 group-hover:text-brand-400 transition-colors shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))]),_:2},1032,["to"]))),128))])):(o(),l("div",E,[s[4]||(s[4]=e("svg",{class:"w-12 h-12 text-white/10 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)),e("p",I,a(u.value?"No results found.":"No analyses yet."),1)]))]),d(i).historyTotalPages>1?(o(),l("div",O,[e("button",{type:"button",disabled:r.value<=1,class:"h-9 w-9 flex items-center justify-center rounded-lg border border-white/10 text-white/50 hover:text-white hover:border-white/20 disabled:opacity-30 disabled:cursor-not-allowed transition-all",onClick:s[1]||(s[1]=t=>{r.value--,h()})},[...s[6]||(s[6]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])],8,Q),e("span",W,a(r.value)+" / "+a(d(i).historyTotalPages),1),e("button",{type:"button",disabled:r.value>=d(i).historyTotalPages,class:"h-9 w-9 flex items-center justify-center rounded-lg border border-white/10 text-white/50 hover:text-white hover:border-white/20 disabled:opacity-30 disabled:cursor-not-allowed transition-all",onClick:s[2]||(s[2]=t=>{r.value++,h()})},[...s[7]||(s[7]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])],8,X)])):F("",!0)])}}});export{le as default};
//# sourceMappingURL=HistoryView-D7QV-Wh_.js.map
