{"version":3,"file":"useAuth-1EP6KlsI.js","sources":["../../src/composables/useAuth.ts"],"sourcesContent":["import { computed } from 'vue'\r\nimport { useRouter, useRoute } from 'vue-router'\r\nimport { useAuthStore } from '@/stores/auth'\r\nimport { useToast } from './useToast'\r\nimport type { LoginPayload, RegisterPayload } from '@/types/auth'\r\n\r\nexport function useAuth() {\r\n  const store = useAuthStore()\r\n  const router = useRouter()\r\n  const route = useRoute()\r\n  const toast = useToast()\r\n\r\n  const user = computed(() => store.user)\r\n  const isAuthenticated = computed(() => store.isAuthenticated)\r\n  const loading = computed(() => store.loading)\r\n  const fullName = computed(() => store.fullName)\r\n  const initials = computed(() => store.initials)\r\n\r\n  async function login(payload: LoginPayload) {\r\n    await store.login(payload)\r\n    toast.success(`Welcome back, ${store.fullName}!`)\r\n    const redirect = route.query.redirect as string | undefined\r\n    await router.push(redirect ?? { name: 'dashboard' })\r\n  }\r\n\r\n  async function register(payload: RegisterPayload) {\r\n    await store.register(payload)\r\n    toast.success(`Account created! Welcome, ${store.fullName}!`)\r\n    await router.push({ name: 'dashboard' })\r\n  }\r\n\r\n  async function logout() {\r\n    await store.logout()\r\n    toast.info('You have been signed out.')\r\n    await router.push({ name: 'landing' })\r\n  }\r\n\r\n  return {\r\n    user,\r\n    isAuthenticated,\r\n    loading,\r\n    fullName,\r\n    initials,\r\n    login,\r\n    register,\r\n    logout,\r\n  }\r\n}\r\n"],"names":["useAuth","store","useAuthStore","router","useRouter","route","useRoute","toast","useToast","user","computed","isAuthenticated","loading","fullName","initials","login","payload","redirect","register","logout"],"mappings":"wGAMO,SAASA,GAAU,CACxB,MAAMC,EAAQC,EAAA,EACRC,EAASC,EAAA,EACTC,EAAQC,EAAA,EACRC,EAAQC,EAAA,EAERC,EAAOC,EAAS,IAAMT,EAAM,IAAI,EAChCU,EAAkBD,EAAS,IAAMT,EAAM,eAAe,EACtDW,EAAUF,EAAS,IAAMT,EAAM,OAAO,EACtCY,EAAWH,EAAS,IAAMT,EAAM,QAAQ,EACxCa,EAAWJ,EAAS,IAAMT,EAAM,QAAQ,EAE9C,eAAec,EAAMC,EAAuB,CAC1C,MAAMf,EAAM,MAAMe,CAAO,EACzBT,EAAM,QAAQ,iBAAiBN,EAAM,QAAQ,GAAG,EAChD,MAAMgB,EAAWZ,EAAM,MAAM,SAC7B,MAAMF,EAAO,KAAKc,GAAY,CAAE,KAAM,YAAa,CACrD,CAEA,eAAeC,EAASF,EAA0B,CAChD,MAAMf,EAAM,SAASe,CAAO,EAC5BT,EAAM,QAAQ,6BAA6BN,EAAM,QAAQ,GAAG,EAC5D,MAAME,EAAO,KAAK,CAAE,KAAM,YAAa,CACzC,CAEA,eAAegB,GAAS,CACtB,MAAMlB,EAAM,OAAA,EACZM,EAAM,KAAK,2BAA2B,EACtC,MAAMJ,EAAO,KAAK,CAAE,KAAM,UAAW,CACvC,CAEA,MAAO,CACL,KAAAM,EACA,gBAAAE,EACA,QAAAC,EACA,SAAAC,EACA,SAAAC,EACA,MAAAC,EACA,SAAAG,EACA,OAAAC,CAAA,CAEJ"}